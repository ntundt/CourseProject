let encode = (input, message, index = -1) =>
    [...input].map(
        c => (['а', 'о', 'х', 'с', 'р', 'е'].includes(c) 
        && [...Array(6)].map(
            (x, i) => 
            ({а:1,б:2,в:3,г:4,д:5,е:6,ж:7,з:8,и:9,й:10,к:11,л:12,м:13,н:14,о:15,п:16,р:17,с:18,т:19,у:20,ф:21,х:22,ц:23,ч:24,ш:25,щ:26,ь:27,ы:28,э:29,ю:30,я:31})[message.charAt(Math.floor(++index / 6))] >> i & 1
            )[index % 6] == 1)
            ? {а:'a',о:'o',х:'x',с:'c',р:'p',е:'e'}[c] : c).join('')